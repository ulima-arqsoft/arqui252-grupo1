# 2.1.6. Listado Consolidado

# 2.1 Módulos del Sistema — ERP Clínicas: CliniSys

Este capítulo describe los módulos funcionales del ERP CliniSys, sus propósitos, alcance y requerimientos funcionales por submódulo, manteniendo trazabilidad con los procesos de la clínica.

---

## 2.1.1. Módulo 1 – Servicios de Salud

### Descripción general
El módulo **Servicios de Salud** administra el proceso de atención médica de punta a punta: **programación de citas**, **atención** (diagnósticos, tratamientos), **procedimientos** e **internamiento/hospitalización**, además del **seguimiento clínico**.  
Permite coordinar disponibilidad de especialistas, optimizar tiempos y mantener trazabilidad de cada servicio.

Este módulo se organiza en dos componentes:
1) **Gestión de Citas Médicas**  
2) **Gestión de Atenciones y Procedimientos**

---

### 2.1.1.1 Gestión de Citas Médicas

**Descripción:**  
Registrar, modificar, consultar y gestionar citas. Control de disponibilidad, conflictos de agenda, notificaciones y estadísticas operativas.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF1** | Registro de Citas Médicas | **Como** recepcionista, **quiero** registrar citas asignando paciente, médico, fecha y hora, **para** organizar la agenda de atención. |
| **RF2** | Control de Disponibilidad de Médicos | **Como** sistema, **quiero** verificar disponibilidad antes de registrar una cita, **para** evitar cruces de horario. |
| **RF3** | Consulta de Agenda Médica | **Como** médico, **quiero** visualizar mis citas del día/semana, **para** planificar mis atenciones. |
| **RF4** | Modificación y Cancelación de Citas | **Como** recepcionista, **quiero** modificar o cancelar citas a solicitud, **para** mantener la agenda actualizada. |
| **RF5** | Notificación de Citas | **Como** sistema, **quiero** enviar notificaciones (correo/SMS) a pacientes y médicos, **para** recordar citas. |
| **RF6** | Registro de Asistencia | **Como** recepcionista, **quiero** marcar asistencia/no-show, **para** generar estadísticas de atención. |
| **RF7** | Reprogramación Automática | **Como** sistema, **quiero** sugerir nuevas fechas ante cancelaciones, **para** facilitar la reprogramación. |
| **RF8** | Estados de Cita | **Como** sistema, **quiero** gestionar estados (pendiente, confirmada, atendida, cancelada, reprogramada), **para** control operativo. |
| **RF9** | Bloques y Ausencias Médicas | **Como** médico, **quiero** bloquear horarios (vacaciones/reuniones), **para** impedir agendamiento en esos periodos. |
| **RF10** | Lista de Espera | **Como** recepcionista, **quiero** gestionar pacientes en *waitlist*, **para** ocupar huecos de cancelaciones. |
| **RF11** | Búsqueda y Filtros de Agenda | **Como** usuario, **quiero** buscar por paciente, médico, especialidad, fecha y estado, **para** localizar citas rápidamente. |
| **RF12** | Reprogramación en Cascada | **Como** administrador, **quiero** mover múltiples citas si un médico queda indisponible, **para** mantener continuidad. |
| **RF13** | Notificaciones Configurables | **Como** administrador, **quiero** definir plantillas y canales, **para** personalizar comunicaciones. |
| **RF14** | Check-in de Paciente | **Como** recepcionista, **quiero** registrar el check-in al llegar, **para** iniciar la atención. |
| **RF15** | Reporte de Agenda | **Como** administrador, **quiero** reportes de atendidas/canceladas/no-show, **para** evaluar productividad. |

**Interfaces Gráficas (referencia):**  
- Agenda (calendario día/semana), listado de citas, crear/editar, detalle, reprogramación, check-in, notificaciones.  
*(Colocar mockups/figma cuando estén listos)*

---

### 2.1.1.2 Gestión de Atenciones y Procedimientos

**Descripción:**  
Registrar atenciones médicas, diagnósticos, tratamientos, procedimientos e insumos utilizados, con integración a **Inventario Médico** y actualización del **historial clínico** en **Gestión de Pacientes**.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF16** | Registro de Atención Médica | **Como** médico, **quiero** registrar diagnósticos, tratamientos y observaciones, **para** mantener el historial clínico. |
| **RF17** | Registro de Procedimientos | **Como** enfermero, **quiero** registrar procedimientos e insumos utilizados, **para** asegurar trazabilidad. |
| **RF18** | Interconsulta entre Especialistas | **Como** médico, **quiero** derivar a otro especialista, **para** dar continuidad al tratamiento. |
| **RF19** | Hospitalización y Seguimiento | **Como** médico, **quiero** registrar hospitalización y controles, **para** seguimiento clínico. |
| **RF20** | Cierre de Atención Médica | **Como** médico, **quiero** cerrar la atención al finalizar, **para** evitar cambios no autorizados. |
| **RF21** | Reapertura Controlada | **Como** administrador, **quiero** permitir reapertura con justificación y traza, **para** control y auditoría. |
| **RF22** | Adjuntos Clínicos | **Como** médico/enfermero, **quiero** adjuntar archivos/imágenes, **para** enriquecer el registro. |
| **RF23** | Plantillas de Diagnóstico/Tratamiento | **Como** médico, **quiero** usar plantillas predefinidas, **para** agilizar el registro. |
| **RF24** | Alertas de Insumos Médicos | **Como** sistema, **quiero** alertar bajo stock, **para** coordinar con Inventario. |
| **RF25** | Validación de Stock y Consumo | **Como** sistema, **quiero** validar stock antes de registrar consumo, **para** evitar inconsistencias. |
| **RF26** | Reportes de Servicios Médicos | **Como** administrador, **quiero** reportes por especialidad/médico/servicio, **para** medir desempeño. |
| **RF27** | Bitácora de Auditoría | **Como** auditor, **quiero** ver historial de cambios y accesos, **para** cumplir trazabilidad. |
| **RF28** | Exportación de Reportes | **Como** administrador, **quiero** exportar reportes (PDF/Excel), **para** análisis externo. |
| **RF29** | Dashboard Clínico | **Como** director/analista, **quiero** KPI de atención y uso de insumos, **para** decisiones. |
| **RF30** | Configuración de Reglas de Atención | **Como** administrador, **quiero** parametrizar duraciones, plantillas y flujos, **para** adaptar a la clínica. |

**Interfaces Gráficas (referencia):**  
- Bandeja de pacientes del día, historia clínica, registrar atención, procedimientos/insumos, hospitalización, cierre, reportes, dashboard.

**Relaciones con otros módulos (M1):**  
- **Inventario Médico (M4):** validar/descargar insumos, alertas de stock.  
- **Gestión de Pacientes (M5):** actualizar historia clínica.  
- **Compras (M2):** disparar reposición por insumos críticos.  
- **Usuarios y Seguridad (M3):** control de permisos por rol.

---

## 2.1.2. Módulo 2 – Compras

### Descripción general
Gestiona el abastecimiento end-to-end: **proveedores → solicitudes de compra (SC) → órdenes de compra (OC) → recepción → conciliación con facturas**.  
Busca trazabilidad, control de condiciones comerciales y alineación con **Inventario Médico** para evitar quiebres de stock/sobrecompras.

---

### 2.1.2.1 Gestión de Proveedores

**Descripción:**  
Maestro de proveedores, condiciones de pago, tiempos de entrega, contacto y estado. Soporta homologación básica.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-1** | Alta de Proveedor | **Como** Compras, **quiero** registrar un proveedor con razón social, RUC/ID, contacto y rubros, **para** habilitarlo en compras. |
| **RF2-2** | Edición de Proveedor | **Como** Compras, **quiero** actualizar datos (contacto, banco, plazos), **para** mantener vigencia. |
| **RF2-3** | Estados del Proveedor | **Como** Administrador/Compras, **quiero** activar/inactivar, **para** bloquear compras observadas. |
| **RF2-4** | Condiciones Comerciales | **Como** Compras, **quiero** registrar pagos/plazos, **para** estandarizar acuerdos. |
| **RF2-5** | Homologación Básica | **Como** Compras, **quiero** adjuntar/verificar RUC/licencias, **para** cumplir auditoría. |

---

### 2.1.2.2 Catálogo y Lista de Materiales (integrado con Inventario)

**Descripción:**  
Consulta de **catálogo** (códigos, lotes, UM, stock, costo) y armado de listas de compra.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-6** | Consulta de Catálogo | **Como** Compras, **quiero** buscar por código/nombre/categoría, **para** armar SC/OC. |
| **RF2-7** | Precios de Referencia | **Como** Compras, **quiero** ver último precio por ítem/proveedor, **para** comparar. |
| **RF2-8** | Sugerencia por Stock Mínimo | **Como** Compras, **quiero** ver sugerencias por stock mínimo/consumo, **para** evitar quiebres. |

---

### 2.1.2.3 Solicitudes de Compra

**Descripción:**  
Registro de **SC** originadas por áreas (enfermería, farmacia, laboratorio).

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-9** | Crear Solicitud | **Como** área, **quiero** crear SC con ítems y cantidades, **para** iniciar compra. |
| **RF2-10** | Aprobación de SC | **Como** Jefe de Área, **quiero** aprobar/rechazar, **para** controlar gasto. |
| **RF2-11** | Conversión SC→OC | **Como** Compras, **quiero** convertir SC aprobadas en OC, **para** agilizar proceso. |

---

### 2.1.2.4 Órdenes de Compra (OC)

**Descripción:**  
Creación y seguimiento de OC con proveedor, condiciones, ítems, precios, impuestos y fechas prometidas.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-12** | Crear OC | **Como** Compras, **quiero** generar OC, **para** formalizar compra. |
| **RF2-13** | Aprobación de OC | **Como** Responsable, **quiero** aprobar/rechazar según reglas, **para** controlar compromisos. |
| **RF2-14** | Versionado/Enmiendas | **Como** Compras, **quiero** enmiendas con control de versión, **para** documentar cambios. |
| **RF2-15** | Estados de OC | **Como** Compras, **quiero** gestionar estados (Borrador→Cancelada), **para** dar seguimiento. |
| **RF2-16** | Envío al Proveedor | **Como** Compras, **quiero** enviar OC por email/PDF y registrar acuse, **para** dejar constancia. |
| **RF2-17** | Multimoneda/Impuestos | **Como** Compras, **quiero** registrar moneda/tipo de cambio/impuestos, **para** costos reales. |

---

### 2.1.2.5 Recepción de Mercadería

**Descripción:**  
Registro de **ingresos al almacén** contra OC, soportando **recepciones parciales** y control de calidad básico.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-18** | Recepción Parcial | **Como** Almacén, **quiero** registrar recepciones parciales, **para** actualizar stock progresivamente. |
| **RF2-19** | Verificación de Ítems | **Como** Almacén, **quiero** verificar cantidades/UM/lotes/caducidad, **para** asegurar conformidad. |
| **RF2-20** | Rechazo/Devolución | **Como** Almacén, **quiero** rechazar ítems y emitir nota, **para** mantener calidad. |
| **RF2-21** | Documentos de Recepción | **Como** Almacén, **quiero** emitir RR asociado, **para** auditar ingreso. |

---

### 2.1.2.6 Conciliación con Facturas

**Descripción:**  
Conciliación **OC ↔ Recepción ↔ Factura** con tolerancias configurables (precio/cantidad).

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-22** | Registro de Factura | **Como** Contabilidad/Compras, **quiero** registrar facturas referenciando OC, **para** habilitar pago. |
| **RF2-23** | 3-Way Match | **Como** Compras, **quiero** conciliar precio/cantidad entre OC, recepción y factura, **para** evitar pagos indebidos. |
| **RF2-24** | Tolerancias | **Como** Administrador, **quiero** configurar tolerancias (±% precio/cantidad), **para** automatizar decisiones. |
| **RF2-25** | Alertas de Desviación | **Como** Compras, **quiero** alertas cuando falle la conciliación, **para** resolver incidencias. |

---

### 2.1.2.7 Integraciones con Inventario y Notificaciones

**Descripción:**  
Sincroniza **movimientos de inventario** y (si aplica) notifica a usuarios.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-26** | Actualización de Stock | **Como** Sistema, **quiero** actualizar stock al recibir, **para** reflejar inventario real. |
| **RF2-27** | Consumo vs Compra | **Como** Compras, **quiero** ver consumo histórico por ítem/área, **para** planificar compras. |
| **RF2-28** | Notificaciones de Estado | **Como** Usuario, **quiero** recibir notificaciones (aprobada/recibida/retrasada), **para** estar informado. |

---

### 2.1.2.8 Reportes y Auditoría

**Descripción:**  
Indicadores y trazabilidad de operaciones.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-29** | Reporte de OC | **Como** Director/Analista, **quiero** reportes por proveedor/categoría, **para** analizar gastos. |
| **RF2-30** | Backorder y Atrasos | **Como** Compras, **quiero** ver OC con atraso vs fecha prometida, **para** gestión de proveedores. |
| **RF2-31** | Trazabilidad Completa | **Como** Auditor, **quiero** ver el rastro de la OC, **para** auditorías. |

---

### 2.1.2.9 Configuración y Reglas de Negocio

**Descripción:**  
Parámetros que gobiernan el módulo.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF2-32** | Reglas de Aprobación | **Como** Administrador, **quiero** niveles de aprobación por monto/categoría, **para** controlar riesgos. |
| **RF2-33** | Calendario y Plazos | **Como** Compras, **quiero** configurar días hábiles y plazos por proveedor, **para** planificar recepciones. |
| **RF2-34** | Moneda e Impuestos | **Como** Administrador, **quiero** definir monedas, tipos de cambio e impuestos, **para** valoración correcta. |
| **RF2-35** | Tolerancias Globales | **Como** Administrador, **quiero** tolerancias por defecto para 3-way match, **para** uniformar criterios. |

---

## 2.1.3. Módulo 3 – Gestión de Usuarios y Seguridad

### Descripción general
Administra cuentas y accesos de **usuarios internos** (clínicos y administrativos) y **externos** (pacientes/portal). Incluye autenticación, roles/permisos, sesiones y auditoría.

---

### 2.1.3.1 Gestión de Usuarios Internos

**Descripción:**  
Gestión de cuentas, roles y permisos del personal. Control de sesiones, autenticación y registro de accesos.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF3-1** | Administración de Roles | **Como** admin, **quiero** crear/gestionar roles (Administrador, Médico, Enfermero, Compras), **para** asignar accesos. |
| **RF3-2** | Asignación de Permisos | **Como** admin, **quiero** definir permisos por rol, **para** evitar accesos no autorizados. |
| **RF3-3** | Registro de Usuarios Internos | **Como** admin, **quiero** registrar usuarios con credenciales institucionales, **para** habilitarlos. |
| **RF3-4** | Inicio de Sesión Interno | **Como** usuario interno, **quiero** iniciar sesión con credenciales, **para** acceder al ERP. |
| **RF3-5** | Gestión de Sesiones | **Como** admin, **quiero** monitorear sesiones activas, **para** controlar accesos en tiempo real. |
| **RF3-6** | Registro de Accesos | **Como** admin, **quiero** consultar historial de accesos, **para** verificar uso y incidencias. |

---

### 2.1.3.2 Gestión de Usuarios Externos

**Descripción:**  
Registro, autenticación y manejo de cuentas de pacientes (portal). Recuperación de contraseña, políticas de seguridad y actualización de perfil.

#### Requerimientos Funcionales

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF3-7** | Registro de Pacientes | **Como** usuario, **quiero** registrarme con mis datos, **para** acceder al portal. |
| **RF3-8** | Inicio de Sesión Externo | **Como** usuario, **quiero** iniciar sesión, **para** ingresar de manera segura. |
| **RF3-9** | Recuperación de Contraseña | **Como** usuario, **quiero** recuperar/restablecer contraseña, **para** no perder acceso. |
| **RF3-10** | Autenticación Segura | **Como** sistema, **quiero** verificar credenciales con mecanismos seguros, **para** proteger datos. |
| **RF3-11** | Políticas de Contraseñas | **Como** admin, **quiero** definir complejidad, **para** aumentar seguridad. |
| **RF3-12** | Perfil de Paciente | **Como** usuario, **quiero** actualizar mis datos, **para** mantener mi información al día. |
| **RF3-13** | Cierre de Sesión | **Como** usuario, **quiero** cerrar sesión manualmente, **para** reducir riesgos. |

---

## 2.1.4. Módulo 4 – Inventario Médico

### Descripción General
Gestiona medicamentos e insumos con **stock en tiempo real**, control de **lotes/caducidad**, **alertas**, **consumos por paciente/área** y **trazabilidad** para optimizar costos y abastecimiento.

### Requerimientos Funcionales – Módulo 4

| ID | Nombre | Historia de Usuario |
|----|--------|---------------------|
| **RF4-1** | Registro de insumos | **Como** encargado de inventario, **quiero** registrar insumos con lote/caducidad/proveedor, **para** garantizar trazabilidad y control. |
| **RF4-2** | Categorización de insumos | **Como** encargado de inventario, **quiero** clasificar insumos por categoría, **para** facilitar búsqueda y gestión. |
| **RF4-3** | Búsqueda de Insumos | **Como** encargado, **quiero** buscar por nombre/categoría/lote/proveedor, **para** localizar y actualizar. |
| **RF4-4** | Consulta de stock en tiempo real | **Como** médico/enfermero, **quiero** consultar stock disponible, **para** asegurar insumos antes de procedimientos. |
| **RF4-5** | Alertas de stock mínimo | **Como** encargado, **quiero** alertas al llegar a stock mínimo, **para** solicitar reposición. |
| **RF4-6** | Alertas de vencimiento | **Como** encargado, **quiero** alertas de próximos vencimientos, **para** evitar uso en pacientes. |
| **RF4-7** | Consumos por paciente | **Como** médico/enfermero, **quiero** registrar insumos usados por paciente, **para** su ficha clínica. |
| **RF4-8** | Consumos por área | **Como** encargado, **quiero** asociar consumos a un área clínica, **para** analizar costos por área. |
| **RF4-9** | Control de entradas | **Como** encargado, **quiero** registrar entradas recibidas, **para** actualizar stock y conciliar con compras. |
| **RF4-10** | Reportes de consumo | **Como** encargado, **quiero** reportes por paciente/área/periodo, **para** optimizar costos y compras. |
| **RF4-11** | Auditoría de movimientos | **Como** administrador, **quiero** historial de entradas/salidas/consumos, **para** trazabilidad y auditorías. |
| **RF4-12** | Restricción de permisos | **Como** administrador, **quiero** que solo roles autorizados registren consumos, **para** evitar accesos no permitidos. |
