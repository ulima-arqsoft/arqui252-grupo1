# 2.3. Restricciones

Las restricciones establecen las **condiciones no negociables** que delimitan las decisiones arquitectónicas y tecnológicas del sistema **ERP CliniSys**.  
Estas restricciones provienen del entorno institucional, los lineamientos del proyecto y las necesidades del cliente.  
Su cumplimiento es obligatorio y condiciona el diseño, la implementación y el despliegue de todos los módulos del sistema.

---

## 1. Restricciones Tecnológicas

- El desarrollo del **frontend** se realizará obligatoriamente en **React.js (versión 18 o superior)**.  
- El **backend** se implementará en **Node.js (versión 20 o superior)** utilizando el framework **Express**.  
- La **base de datos** será **PostgreSQL (versión 15 o superior)**.  
- Toda comunicación entre frontend y backend deberá realizarse mediante **API RESTful** utilizando formato **JSON**.  
- Se empleará un **ORM** (Prisma o Sequelize) para la gestión de datos y control de transacciones.  
- No se permite el uso de tecnologías externas no aprobadas (Firebase, PHP, MongoDB, etc.).  

---

## 2. Restricciones de Infraestructura

- El sistema deberá ejecutarse en entornos **contenedorizados con Docker Compose**, separando los servicios de frontend, backend y base de datos.  
- Los entornos definidos son: **desarrollo**, **staging** y **producción**, con configuración independiente mediante archivos `.env`.  
- La infraestructura principal deberá operar sobre **servidores Linux** o equivalentes compatibles con PostgreSQL.  
- El despliegue deberá permitir la **escalabilidad horizontal**, posibilitando el aumento de instancias en caso de alta demanda.  
- Se deberá contar con **mecanismos de respaldo automático** de base de datos cada 24 horas.  

---

## 3. Restricciones de Seguridad

- Toda comunicación entre los módulos y con los usuarios finales deberá realizarse a través de **HTTPS (TLS 1.3 o superior)**.  
- Las contraseñas, tokens y datos sensibles deberán almacenarse cifrados utilizando **bcrypt** o **AES-256**.  
- El sistema implementará **autenticación basada en JWT** (JSON Web Token) con tiempos de expiración configurables.  
- Los accesos y permisos estarán regulados por roles definidos en el **módulo de Gestión de Usuarios y Seguridad**.  
- En caso de intentos de acceso no autorizado, el sistema deberá registrar el evento en una **bitácora de auditoría**.  
- El sistema deberá cumplir con la **Ley N.º 29733 – Ley de Protección de Datos Personales (Perú)**.  

---

## 4. Restricciones de Interoperabilidad

- Todos los módulos del sistema (Servicios de Salud, Compras, Usuarios, Inventario) deberán comunicarse **exclusivamente mediante servicios REST**.  
- No se permite el **acceso directo entre bases de datos** de diferentes módulos.  
- El formato estándar de intercambio será **JSON** y las respuestas de API deberán mantener la estructura `{ status, data, message }`.  
- Las integraciones externas (notificaciones, correo, etc.) deberán autenticarse mediante **OAuth 2.0** y mantener cifrado TLS.  
- Los tiempos de respuesta entre módulos no deberán superar los **2 segundos** en el 95% de los casos (p95).  

---

## 5. Restricciones de Rendimiento

- El tiempo máximo de respuesta para operaciones críticas (login, citas médicas, registro de atención) será de **≤ 2 segundos**.  
- Las consultas a reportes o inventarios podrán extenderse hasta **3 segundos máximo**.  
- El sistema deberá mantener una **disponibilidad mínima del 99%** durante el horario operativo.  
- El diseño deberá permitir el manejo de **al menos 100 usuarios concurrentes** sin pérdida significativa de rendimiento.  
- Las consultas masivas (más de 10,000 registros) deberán implementarse con **paginación o lazy loading**.  
- Los recursos del frontend deberán optimizarse mediante **cacheo, lazy loading** y uso de **React.memo / useCallback**.  

---

## 6. Restricciones de Negocio y Legales

- El sistema deberá cumplir con la **Ley Peruana N° 29733** sobre **protección de datos personales**.  
- Toda información clínica o sensible deberá estar disponible únicamente para usuarios autorizados según su **rol (médico, enfermero, administrador)**.  
- Los pacientes deberán **aceptar los términos de privacidad y uso de datos** durante el registro en el sistema.  
- El sistema deberá permitir al usuario ejercer su **derecho de eliminación o rectificación de datos personales**.  
- No se podrán almacenar registros clínicos fuera de los servidores institucionales o en servicios cloud sin autorización del cliente.  

---