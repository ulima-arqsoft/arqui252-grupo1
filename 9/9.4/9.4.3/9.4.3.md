> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.4. Iteraci√≥n 3: Refinar estructuras para abordar el atributo de calidad m√°s importante](../9.4.md) ‚Ä∫ [9.4.3. Conceptos de dise√±o](9.4.3.md)

# 9.4.3. Conceptos de dise√±o

| C√≥digo      | Decisi√≥n de Dise√±o                                                           | Fundamentaci√≥n |
|-------------|-------------------------------------------------------------------------------|----------------|
| **DEC-S1**  | Implementar **JWT + Refresh Token + Rotaci√≥n de tokens**                     | Satisface ESC-01, ESC-14 y RES-04. Garantiza continuidad incluso si un token es comprometido. La rotaci√≥n evita reutilizaci√≥n de tokens robados. |
| **DEC-S2**  | Implementar **RBAC basado en Roles y Permisos (Guard + Decorators NestJS)**  | Alineado con CRN-03 y tu modelo de datos (`Rol`, `Permiso`, `UsuarioRol`, `RolPermiso`). Permite validar autorizaciones por m√≥dulo. |
| **DEC-S3**  | Crear **auditor√≠a estructurada** en tabla `audit_log`                        | Satisface CRN-04, ESC-08, ESC-11. Permite rastrear cualquier acci√≥n cl√≠nica o administrativa. |
| **DEC-S4**  | Usar **transacciones ACID en PostgreSQL** para citas, atenciones y stock     | Satisface ESC-07 y CRN-02, garantizando consistencia ante fallas. |
| **DEC-S5**  | Implementar **Rate Limiting + Bloqueo temporal** (Redis)                     | Evita ataques de fuerza bruta (ESC-08) y abuso de endpoints. |
| **DEC-S6**  | Implementar **Validaci√≥n de permisos por recurso** (row-level authorization) | Evita accesos indebidos a historiales (Ley 29733 + ESC-08). |
| **DEC-S7**  | Aplicar **CORS estricto y HTTPS obligatorio**                                | Alineado con RES-04. |
| **DEC-S8**  | Implementar **Validaciones robustas con DTOs + Pipes globales**              | Satisface ESC-06 y ESC-09. |
| **DEC-S9**  | Usar **retry policies** al registrar citas o consumos                        | Satisface ESC-07. |
| **DEC-S10** | Integrar **OAuth Google + validaci√≥n de tokens**                             | Satisface ESC-14. |

---

[‚¨ÖÔ∏è Anterior](../9.4.2/9.4.2.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.4.4/9.4.4.md)