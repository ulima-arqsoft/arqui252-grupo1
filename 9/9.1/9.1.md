> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../9.md) ‚Ä∫ [9.1. Revisi√≥n de Entradas](9.1.md)

# 9.1. Revisi√≥n de Entradas

La presente secci√≥n consolida los insumos necesarios para aplicar la metodolog√≠a **Attribute Driven Design (ADD)** al ERP cl√≠nico **CliniSys**.  
La informaci√≥n proviene de:

- **1.1 ‚Äì 1.2** Caso de negocio y modelo
- **2.1.6** Requisitos funcionales consolidados
- **2.2.6** Escenarios de atributos de calidad
- **2.3** Restricciones
- **4.6** Decisiones iniciales de arquitectura

Estos elementos alimentan directamente las Iteraciones 9.2, 9.3 y 9.4.

---

## 9.1.1. Prop√≥sito del Sistema

El sistema **CliniSys** integra en una plataforma √∫nica los procesos esenciales de una cl√≠nica peque√±a:  
**Servicios de Salud, Compras, Inventario M√©dico, Gesti√≥n de Usuarios y Seguridad**, evitando sistemas aislados y duplicidad de informaci√≥n.

El prop√≥sito arquitect√≥nico es:

- Garantizar **rendimiento**, **disponibilidad**, **seguridad**, **interoperabilidad** y **trazabilidad cl√≠nica**.  
- Mantener un dise√±o **modular por capas** que facilite evoluci√≥n futura.  
- Operar sobre una plataforma **Node.js/NestJS + PostgreSQL + Docker** con despliegue en **Azure**.

---

# Funcionalidades primarias (Casos de Uso)

A continuaci√≥n se describen los **casos de uso primarios** derivados del consolidado funcional (2.1.6).  
Se incluyen √∫nicamente aquellos que act√∫an como **drivers arquitect√≥nicos principales**.

| ID   | M√≥dulo                  | Nombre                         | Historia de Usuario |
|------|-------------------------|--------------------------------|----------------------|
| **CU01** | Servicios de Salud | Registro de Citas M√©dicas | Como recepcionista, quiero registrar citas asignando paciente, m√©dico, fecha y hora, para organizar la agenda cl√≠nica. |
| **CU02** | Servicios de Salud | Consulta de Agenda M√©dica | Como m√©dico, quiero visualizar mis citas del d√≠a/semana, para planificar mis atenciones. |
| **CU03** | Servicios de Salud | Modificaci√≥n / Cancelaci√≥n de Citas | Como recepcionista, quiero modificar o cancelar citas, para mantener la agenda actualizada. |
| **CU04** | Servicios de Salud | Registro de Atenci√≥n M√©dica | Como m√©dico, quiero registrar diagn√≥sticos, tratamientos y observaciones, para mantener el historial cl√≠nico. |
| **CU05** | Servicios de Salud | Registro de Procedimientos e Insumos | Como enfermero, quiero registrar procedimientos e insumos utilizados, para garantizar trazabilidad. |
| **CU06** | Servicios de Salud | Validaci√≥n de Stock antes de Atenciones | Como sistema, quiero validar stock antes de registrar consumo, para evitar inconsistencias cl√≠nicas. |
| **CU07** | Compras | Crear Solicitud de Compra | Como √°rea cl√≠nica, quiero crear solicitudes de compra, para iniciar el proceso de abastecimiento. |
| **CU08** | Compras | Generar Orden de Compra (SC ‚Üí OC) | Como compras, quiero convertir solicitudes aprobadas en √≥rdenes de compra, para formalizar adquisiciones. |
| **CU09** | Compras | Recepci√≥n Parcial de Mercader√≠a | Como almac√©n, quiero registrar recepciones parciales, para actualizar stock progresivamente. |
| **CU10** | Compras | Conciliaci√≥n 3-Way Match | Como compras, quiero conciliar OC ‚Üî recepci√≥n ‚Üî factura, para evitar pagos indebidos. |
| **CU11** | Usuarios y Seguridad | Inicio de Sesi√≥n Interno | Como usuario interno, quiero iniciar sesi√≥n con credenciales v√°lidas, para acceder al ERP. |
| **CU12** | Usuarios y Seguridad | Autenticaci√≥n Segura | Como sistema, quiero verificar credenciales mediante mecanismos seguros, para proteger la informaci√≥n cl√≠nica. |
| **CU13** | Usuarios y Seguridad | Administraci√≥n de Roles y Permisos | Como administrador, quiero registrar roles y definir permisos, para controlar accesos. |
| **CU14** | Inventario M√©dico | Consulta de Stock en Tiempo Real | Como m√©dico/enfermero, quiero consultar stock disponible, para asegurar insumos antes de procedimientos. |
| **CU15** | Inventario M√©dico | Registro de Consumos por Paciente | Como m√©dico/enfermero, quiero registrar insumos usados, para trazabilidad cl√≠nica. |
| **CU16** | Inventario M√©dico | Alertas de Stock M√≠nimo | Como encargado, quiero recibir alertas de stock m√≠nimo, para evitar quiebres. |

---

# Escenarios de atributos de calidad (ESC)

A continuaci√≥n se presentan los escenarios de calidad y prueba del sistema del ERP cl√≠nico. Cada fila describe un escenario que puede afectar la funcionalidad o el desempe√±o del sistema, indicando el atributo de calidad asociado (usabilidad, rendimiento, seguridad, etc.), la fuente y tipo de est√≠mulo, el artefacto tecnol√≥gico involucrado, el entorno de operaci√≥n, la respuesta esperada del sistema, y la medida de respuesta para evaluar su cumplimiento.

| ID | Atributo de Calidad | Fuente Est√≠mulo   | Est√≠mulo  | Artefacto Tecnol√≥gico  | Entorno  | Respuesta del Sistema  | Medida de Respuesta   | Casos de uso relacionados |
| ------ | --------------------- | -------------------------------------------- | --------------------------------------------------------------------- | ---------------------------------------------------------------- | -------------------------- | ------------------------------------------------------------------------- | ------------------------------------------------------------ | ------------------------- |
| ESC-01 | Disponibilidad        | Sistema de Autenticaci√≥n / Infraestructura   | Falla del servicio de autenticaci√≥n o ca√≠da del servidor principal    | M√≥dulo de Gesti√≥n de Usuarios y Seguridad / Servidor principal   | En operaci√≥n normal        | Redirecci√≥n autom√°tica a servidor redundante o autenticaci√≥n de respaldo  | Recuperaci√≥n en ‚â§10 segundos sin p√©rdida de sesi√≥n           | CU11, CU12 |
| ESC-02 | Rendimiento           | Usuario concurrente interno y externo        | M√∫ltiples usuarios intentan acceder a una secci√≥n simult√°neamente     | Backend de M√≥dulo de Gesti√≥n de Usuarios y Seguridad / consultas | Carga alta (‚â•100 usuarios) | Procesamiento concurrente y consultas optimizadas                         | Respuesta <2 segundos en 95% de los casos                    | CU11, CU12 |
| ESC-03 | Usabilidad            | Usuario final                                | Usuario olvida su contrase√±a o introduce datos err√≥neos               | Interfaz de M√≥dulo Gesti√≥n de Usuarios y Seguridad               | En l√≠nea                   | Gu√≠a paso a paso para restablecer credenciales                            | Recuperaci√≥n exitosa del 95% de usuarios sin soporte t√©cnico | CU11, CU12 |
| ESC-04 | Seguridad             | QA / Equipo de Desarrollo                    | Validaci√≥n de cambios en pol√≠ticas de contrase√±as                     | M√≥dulo de Gesti√≥n de Usuarios y Seguridad                        | Entorno de pruebas         | Ejecuci√≥n automatizada de pruebas unitarias                               | 100% de casos cr√≠ticos cubiertos en suite automatizada       | CU11, CU12 |
| ESC-05 | Usabilidad            | Usuario administrativo                       | Importar lista masiva de √≠tems a una OC desde CSV                     | M√≥dulo de √≥rdenes de compra                                      | En operaci√≥n normal        | Validaci√≥n del esquema y previsualizaci√≥n antes de confirmar              | 100% de validaciones previas antes de inserci√≥n              | CU07, CU08, CU10 |
| ESC-06 | Usabilidad            | Usuario final (cl√≠nico, compras, inventario) | Revisi√≥n o registro de elementos (citas, √≥rdenes, inventario, agenda) | Interfaces CRUD y m√≥dulos de b√∫squeda                            | En operaci√≥n normal        | Filtros r√°pidos, vistas guardadas, validaciones guiadas                   | 90% de operaciones completadas sin error en primer intento   | CU01, CU04, CU08, CU14, CU15 |
| ESC-07 | Disponibilidad        | Usuario / Sistema                            | Falla del servidor durante el registro de una cita                    | M√≥dulo de agenda / base de datos                                 | Durante transacci√≥n activa | Guarda temporalmente la informaci√≥n y reintenta al recuperar conexi√≥n     | Reintento exitoso en ‚â§30 segundos tras recuperaci√≥n          | CU01, CU03 |
| ESC-08 | Seguridad             | Usuario malicioso                            | Intento de acceso no autorizado a informaci√≥n cl√≠nica                 | M√≥dulo de Gesti√≥n de Usuarios y Seguridad                        | En l√≠nea                   | Bloqueo de acceso, registro en log de seguridad y alerta al administrador | Detecci√≥n y bloqueo inmediato (<1 seg)                       | CU11, CU12, CU13 |
| ESC-09 | Usabilidad            | Usuario cl√≠nico / recepcionista              | Dificultad del usuario al registrar una cita o atenci√≥n               | Interfaz de agenda                                               | En operaci√≥n normal        | Interfaz guiada con validaciones autom√°ticas y mensajes claros            | 90% de operaciones completadas sin error                     | CU01, CU03, CU04 |
| ESC-10 | Rendimiento           | Usuario cl√≠nico                              | Usuario busca medicamento por nombre                                  | M√≥dulo de inventario                                             | En operaci√≥n normal        | Interfaz con b√∫squeda y filtros incrementales                             | Resultados <2 segundos para b√∫squedas comunes                | CU14 |
| ESC-11 | Seguridad             | Usuario sin permisos / sistema de seguridad  | Intento de modificar stock sin permisos                               | M√≥dulo de inventario y seguridad (RBAC)                          | En operaci√≥n normal        | Bloqueo de acceso y registro del intento en logs                          | 100% de intentos registrados y bloqueados                    | CU13, CU14, CU15 |
| ESC-12 | Mantenibilidad        | Equipo de mantenimiento                      | Configurar nuevas alertas de stock                                    | M√≥dulo de inventario                                             | Entorno de configuraci√≥n   | Modificaci√≥n sin afectar otros m√≥dulos                                    | Cambios desplegados sin fallos en integraci√≥n                | CU16 |
| ESC-13 | Interoperabilidad     | Sistema externo (M√≥dulo de Compras)          | Integraci√≥n con m√≥dulo de compras                                     | API de stock e inventario                                        | En operaci√≥n normal        | Actualiza stock autom√°ticamente mediante API-REST                         | Sin errores de sincronizaci√≥n en 99% de las transacciones    | CU09, CU10, CU14 |
| ESC-14 | Seguridad             | Usuario externo                              | Usuario intenta iniciar sesi√≥n con Google                             | M√≥dulo de Gesti√≥n de Usuarios y Seguridad / OAuth Google         | Producci√≥n                 | Redirecci√≥n al flujo de autenticaci√≥n de Google y validaci√≥n de token     | Inicio de sesi√≥n exitoso ‚â§3 segundos sin p√©rdida de sesi√≥n   | CU11, CU12 |

---

# Restricciones (RES)

Derivadas de 2.3, renumeradas y consolidadas:

| ID | Restricci√≥n | Descripci√≥n |
|----|-------------|-------------|
| **RES-01** | Stack obligatorio | Frontend en React/Next.js; Backend en Node.js/NestJS; BD PostgreSQL. |
| **RES-02** | Arquitectura por capas | Presentaci√≥n, Aplicaci√≥n, Dominio e Infraestructura en monolito modular. |
| **RES-03** | Conectividad | Toda comunicaci√≥n interna mediante REST + JSON. |
| **RES-04** | Seguridad | HTTPS obligatorio, JWT, cifrado de datos sensibles, cumplimiento Ley 29733. |
| **RES-05** | Contenedorizaci√≥n | Docker Compose para todos los entornos. |
| **RES-06** | Rendimiento | Operaciones cr√≠ticas ‚â§ 2s; ‚â• 100 usuarios concurrentes. |
| **RES-07** | Interoperabilidad | Prohibido acceso cruzado entre bases de datos de m√≥dulos. |
| **RES-08** | Disponibilidad | Backups autom√°ticos cada 24h y disponibilidad ‚â• 99%. |

---

# Preocupaciones a Nivel de Arquitectura (CRN)

Basadas en decisiones 4.6.1‚Äì4.6.5:

| ID | Nombre | Descripci√≥n | M√≥dulo / Artefacto |
|----|---------|-------------|--------------------|
| **CRN-01** | Escalabilidad en operaciones cr√≠ticas | Agenda, login y stock deben soportar carga concurrente | M1, M3, M4 |
| **CRN-02** | Consistencia entre m√≥dulos | Mantener integridad entre Servicios de Salud ‚Üî Inventario ‚Üî Compras | APIs REST internas |
| **CRN-03** | Seguridad de accesos | Garantizar control estricto de roles y permisos | M3 Seguridad |
| **CRN-04** | Trazabilidad cl√≠nica | Registros completos de atenciones, consumos e inventario | M1, M4 |
| **CRN-05** | Bajo acoplamiento entre m√≥dulos | Asegurar que los m√≥dulos internos (Salud, Compras, Seguridad, Inventario) se comuniquen mediante interfaces claras y sin dependencias directas que dificulten cambios o mantenimiento. | Architecture (NestJS Modules) |
| **CRN-06** | Evoluci√≥n del modelo de datos | JSONB debe permitir extensibilidad sin romper contratos | PostgreSQL (todos los m√≥dulos) |

---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../9.2/9.2.md)