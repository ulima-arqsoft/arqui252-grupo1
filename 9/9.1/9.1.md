> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../9.md) ‚Ä∫ [9.1. Revisi√≥n de Entradas](9.1.md)

# 9.1. Revisi√≥n de Entradas

La presente secci√≥n consolida los insumos necesarios para aplicar la metodolog√≠a **Attribute Driven Design (ADD)** al ERP cl√≠nico **CliniSys**.  
La informaci√≥n proviene de:

- **1.1 ‚Äì 1.2** Caso de negocio y modelo
- **2.1.6** Requisitos funcionales consolidados
- **2.2.6** Escenarios de atributos de calidad
- **2.3** Restricciones
- **4.6** Decisiones iniciales de arquitectura

Estos elementos alimentan directamente las Iteraciones 9.2, 9.3 y 9.4.

---

## 9.1.1. Prop√≥sito del Sistema

El sistema **CliniSys** integra en una plataforma √∫nica los procesos esenciales de una cl√≠nica peque√±a:  
**Servicios de Salud, Compras, Inventario M√©dico, Gesti√≥n de Usuarios y Seguridad**, evitando sistemas aislados y duplicidad de informaci√≥n.

El prop√≥sito arquitect√≥nico es:

- Garantizar **rendimiento**, **disponibilidad**, **seguridad**, **interoperabilidad** y **trazabilidad cl√≠nica**.  
- Mantener un dise√±o **modular por capas** que facilite evoluci√≥n futura.  
- Operar sobre una plataforma **Node.js/NestJS + PostgreSQL + Docker** con despliegue en **Azure**.

---

# Funcionalidades primarias (Casos de Uso)

A continuaci√≥n se describen los **casos de uso primarios** derivados del consolidado funcional (2.1.6).  
Se incluyen √∫nicamente aquellos que act√∫an como **drivers arquitect√≥nicos principales**.

| ID   | M√≥dulo                  | Nombre                         | Historia de Usuario |
|------|-------------------------|--------------------------------|----------------------|
| **CU01** | Servicios de Salud | Registro de Citas M√©dicas | Como recepcionista, quiero registrar citas asignando paciente, m√©dico, fecha y hora, para organizar la agenda cl√≠nica. |
| **CU02** | Servicios de Salud | Consulta de Agenda M√©dica | Como m√©dico, quiero visualizar mis citas del d√≠a/semana, para planificar mis atenciones. |
| **CU03** | Servicios de Salud | Modificaci√≥n / Cancelaci√≥n de Citas | Como recepcionista, quiero modificar o cancelar citas, para mantener la agenda actualizada. |
| **CU04** | Servicios de Salud | Registro de Atenci√≥n M√©dica | Como m√©dico, quiero registrar diagn√≥sticos, tratamientos y observaciones, para mantener el historial cl√≠nico. |
| **CU05** | Servicios de Salud | Registro de Procedimientos e Insumos | Como enfermero, quiero registrar procedimientos e insumos utilizados, para garantizar trazabilidad. |
| **CU06** | Servicios de Salud | Validaci√≥n de Stock antes de Atenciones | Como sistema, quiero validar stock antes de registrar consumo, para evitar inconsistencias cl√≠nicas. |
| **CU07** | Compras | Crear Solicitud de Compra | Como √°rea cl√≠nica, quiero crear solicitudes de compra, para iniciar el proceso de abastecimiento. |
| **CU08** | Compras | Generar Orden de Compra (SC ‚Üí OC) | Como compras, quiero convertir solicitudes aprobadas en √≥rdenes de compra, para formalizar adquisiciones. |
| **CU09** | Compras | Recepci√≥n Parcial de Mercader√≠a | Como almac√©n, quiero registrar recepciones parciales, para actualizar stock progresivamente. |
| **CU10** | Compras | Conciliaci√≥n 3-Way Match | Como compras, quiero conciliar OC ‚Üî recepci√≥n ‚Üî factura, para evitar pagos indebidos. |
| **CU11** | Usuarios y Seguridad | Inicio de Sesi√≥n Interno | Como usuario interno, quiero iniciar sesi√≥n con credenciales v√°lidas, para acceder al ERP. |
| **CU12** | Usuarios y Seguridad | Autenticaci√≥n Segura | Como sistema, quiero verificar credenciales mediante mecanismos seguros, para proteger la informaci√≥n cl√≠nica. |
| **CU13** | Usuarios y Seguridad | Administraci√≥n de Roles y Permisos | Como administrador, quiero registrar roles y definir permisos, para controlar accesos. |
| **CU14** | Inventario M√©dico | Consulta de Stock en Tiempo Real | Como m√©dico/enfermero, quiero consultar stock disponible, para asegurar insumos antes de procedimientos. |
| **CU15** | Inventario M√©dico | Registro de Consumos por Paciente | Como m√©dico/enfermero, quiero registrar insumos usados, para trazabilidad cl√≠nica. |
| **CU16** | Inventario M√©dico | Alertas de Stock M√≠nimo | Como encargado, quiero recibir alertas de stock m√≠nimo, para evitar quiebres. |

---

# Escenarios de atributos de calidad (ESC)

Los siguientes escenarios fueron extra√≠dos y reorganizados del consolidado (2.2.6).  
Cada escenario incluye **artefactos y m√≥dulos involucrados**.

| ID     | Atributo de Calidad | Fuente Est√≠mulo | Est√≠mulo | Artefacto Tecnol√≥gico / M√≥dulos Involucrados | Entorno | Respuesta del Sistema | Medida | Casos de uso |
|--------|----------------------|------------------|----------|-----------------------------------------------|---------|------------------------|--------|--------------|
| **ESC-01** | Disponibilidad | Usuario interno | Falla del servidor al registrar una cita | Servicio de Agenda ‚Äî **M1 Servicios de Salud** | Horario laboral | Guardado temporal y reintento autom√°tico | ‚â• 99% disponibilidad | CU01 |
| **ESC-02** | Rendimiento | Usuarios concurrentes | Consulta simult√°nea de agenda | Consulta Agenda ‚Äî **M1 Servicios de Salud** | Pico de uso | Consultas optimizadas, cach√© | < 2s (p95) | CU02 |
| **ESC-03** | Usabilidad | Personal cl√≠nico | Dificultad al registrar cita/atenci√≥n | UI de Agenda/Atenci√≥n ‚Äî **M1 Servicios de Salud** | Operaci√≥n normal | Formularios guiados y validaciones | 90% √©xito primer intento | CU01, CU04 |
| **ESC-04** | Interoperabilidad | Sistema interno | Validaci√≥n de stock para procedimientos | Integraci√≥n M1 ‚Üî M4 ‚Äî **Servicios de Salud + Inventario** | En atenci√≥n | Respuesta v√≠a API sin bloquear atenci√≥n | < 2s | CU05, CU06 |
| **ESC-05** | Disponibilidad | Sistema de notificaciones | Falla en env√≠o de OC | Env√≠o de OC y notificaciones ‚Äî **M2 Compras** | En l√≠nea | Reintentos as√≠ncronos; estado ‚Äúpendiente de env√≠o‚Äù | p95 entrega ‚â§ 30 min | CU08 |
| **ESC-06** | Testabilidad | QA | Pruebas de conciliaci√≥n sin externos | Conciliaci√≥n OC‚ÄìRecepci√≥n‚ÄìFactura ‚Äî **M2 Compras** | Testing | Mocks autom√°ticos | 100% endpoints mockeados | CU10 |
| **ESC-07** | Usabilidad | Encargado de Compras | Revisar muchas OC | Listado y filtros OC ‚Äî **M2 Compras** | Operaci√≥n normal | Filtros r√°pidos y vistas guardadas | < 2s (p95) | CU08 |
| **ESC-08** | Interoperabilidad | Integrador | Carga masiva CSV ‚Üí OC | Importaci√≥n CSV ‚Äî **M2 Compras** | Carga masiva | Validaci√≥n previa y previsualizaci√≥n | ‚â§ 60s (‚â§ 5000 filas) | CU08 |
| **ESC-09** | Rendimiento | Usuarios concurrentes | Varias solicitudes de login simult√°neas | Autenticaci√≥n ‚Äî **M3 Seguridad/Usuarios** | Alta carga | Procesamiento concurrente | < 2s (p95) | CU11, CU12 |
| **ESC-10** | Disponibilidad | Infraestructura | Ca√≠da del servidor de autenticaci√≥n | Login/Token Service ‚Äî **M3 Seguridad** | Operaci√≥n normal | Failover autom√°tico | ‚â• 99% | CU11, CU12 |
| **ESC-11** | Usabilidad | Usuario final | Dificultad recuperando contrase√±a | Recuperaci√≥n de cuenta ‚Äî **M3 Seguridad** | En l√≠nea | Asistente guiado | ‚â• 90% √©xito | CU11, CU12 |
| **ESC-12** | Interoperabilidad | Auditor√≠a | Registrar inicio/cierre de sesi√≥n | Registro de accesos ‚Äî **M3 Seguridad** | Operaci√≥n normal | Log autom√°tico centralizado | 100% eventos registrados | CU11, CU13 |
| **ESC-13** | Rendimiento | M√©dico/Enfermero | Consultas simult√°neas de stock | Consulta Stock ‚Äî **M4 Inventario** | Normal | √çndices/cach√© | < 3s | CU14 |
| **ESC-14** | Disponibilidad | Usuario cl√≠nico | Registrar consumo en horarios cr√≠ticos | Consumos por paciente ‚Äî **M4 Inventario** | 24/7 | Transacciones seguras sin ca√≠da | ‚â• 99% | CU15 |
| **ESC-15** | Seguridad | Usuario no autorizado | Intento de modificar stock sin permisos | Permisos RBAC ‚Äî **M4 Inventario + M3 Seguridad** | Normal | Bloqueo y log de intento | 100% bloqueado | CU13, CU14 |
| **ESC-16** | Seguridad | Auditor | Rastrear movimientos de stock | Auditor√≠a de inventario ‚Äî **M4 Inventario** | Auditor√≠a | Reportes completos y exportables | 100% trazabilidad | CU14, CU15 |

---

# Restricciones (RES)

Derivadas de 2.3, renumeradas y consolidadas:

| ID | Restricci√≥n | Descripci√≥n |
|----|-------------|-------------|
| **RES-01** | Stack obligatorio | Frontend en React/Next.js; Backend en Node.js/NestJS; BD PostgreSQL. |
| **RES-02** | Arquitectura por capas | Presentaci√≥n, Aplicaci√≥n, Dominio e Infraestructura en monolito modular. |
| **RES-03** | Conectividad | Toda comunicaci√≥n interna mediante REST + JSON. |
| **RES-04** | Seguridad | HTTPS obligatorio, JWT, cifrado de datos sensibles, cumplimiento Ley 29733. |
| **RES-05** | Contenedorizaci√≥n | Docker Compose para todos los entornos. |
| **RES-06** | Rendimiento | Operaciones cr√≠ticas ‚â§ 2s; ‚â• 100 usuarios concurrentes. |
| **RES-07** | Interoperabilidad | Prohibido acceso cruzado entre bases de datos de m√≥dulos. |
| **RES-08** | Disponibilidad | Backups autom√°ticos cada 24h y disponibilidad ‚â• 99%. |

---

# Preocupaciones a Nivel de Arquitectura (CRN)

Basadas en decisiones 4.6.1‚Äì4.6.5:

| ID | Nombre | Descripci√≥n | M√≥dulo / Artefacto |
|----|---------|-------------|--------------------|
| **CRN-01** | Escalabilidad en operaciones cr√≠ticas | Agenda, login y stock deben soportar carga concurrente | M1, M3, M4 |
| **CRN-02** | Consistencia entre m√≥dulos | Mantener integridad entre Servicios de Salud ‚Üî Inventario ‚Üî Compras | APIs REST internas |
| **CRN-03** | Seguridad de accesos | Garantizar control estricto de roles y permisos | M3 Seguridad |
| **CRN-04** | Trazabilidad cl√≠nica | Registros completos de atenciones, consumos e inventario | M1, M4 |
| **CRN-05** | Bajo acoplamiento entre m√≥dulos | Asegurar que los m√≥dulos internos (Salud, Compras, Seguridad, Inventario) se comuniquen mediante interfaces claras y sin dependencias directas que dificulten cambios o mantenimiento. | Architecture (NestJS Modules) |
| **CRN-06** | Evoluci√≥n del modelo de datos | JSONB debe permitir extensibilidad sin romper contratos | PostgreSQL (todos los m√≥dulos) |

---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../9.2/9.2.md)