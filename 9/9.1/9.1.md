> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../9.md) ‚Ä∫ [9.1. Revisi√≥n de Entradas](9.1.md)

# 9.1. Revisi√≥n de Entradas

La presente secci√≥n consolida los insumos necesarios para aplicar la metodolog√≠a **Attribute Driven Design (ADD)** al ERP cl√≠nico **CliniSys**.  
La informaci√≥n proviene de:

- **1.1 ‚Äì 1.2** Caso de negocio y modelo
- **2.1.6** Requisitos funcionales consolidados
- **2.2.6** Escenarios de atributos de calidad
- **2.3** Restricciones
- **4.6** Decisiones iniciales de arquitectura

Estos elementos alimentan directamente las Iteraciones 9.2, 9.3 y 9.4.

---

## 9.1.1. Prop√≥sito del Sistema

El sistema **CliniSys** integra en una plataforma √∫nica los procesos esenciales de una cl√≠nica peque√±a:  
**Servicios de Salud, Compras, Inventario M√©dico, Gesti√≥n de Usuarios y Seguridad**, evitando sistemas aislados y duplicidad de informaci√≥n.

El prop√≥sito arquitect√≥nico es:

- Garantizar **rendimiento**, **disponibilidad**, **seguridad**, **interoperabilidad** y **trazabilidad cl√≠nica**.  
- Mantener un dise√±o **modular por capas** que facilite evoluci√≥n futura.  
- Operar sobre una plataforma **Node.js/NestJS + PostgreSQL + Docker** con despliegue en **Azure**.

---

# Funcionalidades primarias (Casos de Uso)

A continuaci√≥n se describen los **casos de uso primarios** derivados del consolidado funcional (2.1.6).  
Se incluyen √∫nicamente aquellos que act√∫an como **drivers arquitect√≥nicos principales**.

| ID   | M√≥dulo                  | Nombre                         | Historia de Usuario |
|------|-------------------------|--------------------------------|----------------------|
| **CU01** | Servicios de Salud | Registro de Citas M√©dicas | Como recepcionista, quiero registrar citas asignando paciente, m√©dico, fecha y hora, para organizar la agenda cl√≠nica. |
| **CU02** | Servicios de Salud | Consulta de Agenda M√©dica | Como m√©dico, quiero visualizar mis citas del d√≠a/semana, para planificar mis atenciones. |
| **CU03** | Servicios de Salud | Modificaci√≥n / Cancelaci√≥n de Citas | Como recepcionista, quiero modificar o cancelar citas, para mantener la agenda actualizada. |
| **CU04** | Servicios de Salud | Registro de Atenci√≥n M√©dica | Como m√©dico, quiero registrar diagn√≥sticos, tratamientos y observaciones, para mantener el historial cl√≠nico. |
| **CU05** | Servicios de Salud | Registro de Procedimientos e Insumos | Como enfermero, quiero registrar procedimientos e insumos utilizados, para garantizar trazabilidad. |
| **CU06** | Servicios de Salud | Validaci√≥n de Stock antes de Atenciones | Como sistema, quiero validar stock antes de registrar consumo, para evitar inconsistencias cl√≠nicas. |
| **CU07** | Compras | Crear Solicitud de Compra | Como √°rea cl√≠nica, quiero crear solicitudes de compra, para iniciar el proceso de abastecimiento. |
| **CU08** | Compras | Generar Orden de Compra (SC ‚Üí OC) | Como compras, quiero convertir solicitudes aprobadas en √≥rdenes de compra, para formalizar adquisiciones. |
| **CU09** | Compras | Recepci√≥n Parcial de Mercader√≠a | Como almac√©n, quiero registrar recepciones parciales, para actualizar stock progresivamente. |
| **CU10** | Compras | Conciliaci√≥n 3-Way Match | Como compras, quiero conciliar OC ‚Üî recepci√≥n ‚Üî factura, para evitar pagos indebidos. |
| **CU11** | Usuarios y Seguridad | Inicio de Sesi√≥n Interno | Como usuario interno, quiero iniciar sesi√≥n con credenciales v√°lidas, para acceder al ERP. |
| **CU12** | Usuarios y Seguridad | Autenticaci√≥n Segura | Como sistema, quiero verificar credenciales mediante mecanismos seguros, para proteger la informaci√≥n cl√≠nica. |
| **CU13** | Usuarios y Seguridad | Administraci√≥n de Roles y Permisos | Como administrador, quiero registrar roles y definir permisos, para controlar accesos. |
| **CU14** | Inventario M√©dico | Consulta de Stock en Tiempo Real | Como m√©dico/enfermero, quiero consultar stock disponible, para asegurar insumos antes de procedimientos. |
| **CU15** | Inventario M√©dico | Registro de Consumos por Paciente | Como m√©dico/enfermero, quiero registrar insumos usados, para trazabilidad cl√≠nica. |
| **CU16** | Inventario M√©dico | Alertas de Stock M√≠nimo | Como encargado, quiero recibir alertas de stock m√≠nimo, para evitar quiebres. |

---

# Escenarios de atributos de calidad (ESC)

A continuaci√≥n se presentan los escenarios de calidad y prueba del sistema del ERP cl√≠nico. Cada fila describe un escenario que puede afectar la funcionalidad o el desempe√±o del sistema, indicando el atributo de calidad asociado (usabilidad, rendimiento, seguridad, etc.), la fuente y tipo de est√≠mulo, el artefacto tecnol√≥gico involucrado, el entorno de operaci√≥n, la respuesta esperada del sistema, y la medida de respuesta para evaluar su cumplimiento.

| ID     | Atributo de Calidad | Fuente Est√≠mulo | Est√≠mulo | Artefacto Tecnol√≥gico / M√≥dulos Involucrados | Entorno | Respuesta del Sistema | Medida de Respuesta | Casos de uso relacionados |
|--------|----------------------|------------------|----------|-----------------------------------------------|---------|------------------------|----------------------|---------------------------|
| **ESC-01** | Disponibilidad | Sistema de Autenticaci√≥n / Infraestructura | Falla del servicio de autenticaci√≥n o ca√≠da del servidor | M3 Gesti√≥n de Usuarios y Seguridad | Operaci√≥n normal | Redirecci√≥n a servidor redundante / autenticaci√≥n de respaldo | Recuperaci√≥n ‚â§10s | **CU11, CU12** |
| **ESC-02** | Rendimiento | Usuarios concurrentes | M√∫ltiples usuarios accediendo simult√°neamente | Backend M3 Seguridad | Carga alta ‚â•100 usuarios | Procesamiento concurrente optimizado | <2s (p95) | **CU11, CU12** |
| **ESC-03** | Usabilidad | Usuario final | Error u olvido de contrase√±a | UI de Gesti√≥n de Usuarios | En l√≠nea | Asistente paso a paso | ‚â•90% √©xito sin soporte | **CU11, CU12** |
| **ESC-04** | Seguridad | QA / Dev | Validaci√≥n de cambios en pol√≠ticas de contrase√±as | M3 Seguridad | Entorno de pruebas | Pruebas unitarias automatizadas | 100% casos cr√≠ticos cubiertos | **CU11, CU12** |
| **ESC-05** | Usabilidad | Usuario administrativo | Importar masivamente √≠tems desde CSV | M2 Compras | Operaci√≥n normal | Validaci√≥n previa y previsualizaci√≥n | 100% validaciones correctas antes de insertar | **CU07, CU08, CU10** |
| **ESC-06** | Usabilidad | Cl√≠nico / Compras / Inventario | CRUD de citas, √≥rdenes, inventario | UI de M1, M2, M4 | Operaci√≥n normal | Filtros, vistas guardadas, validaciones guiadas | ‚â•90% operaciones sin error | **CU01, CU04, CU08, CU14, CU15** |
| **ESC-07** | Disponibilidad | Usuario / Sistema | Falla durante registro de cita | Agenda M1 / BD | Transacci√≥n activa | Guardado temporal + reintento | Reintento ‚â§30s | **CU01, CU03** |
| **ESC-08** | Seguridad | Usuario malicioso | Intento de acceso no autorizado | M3 Seguridad (RBAC) | En l√≠nea | Bloqueo inmediato y registro | <1s detecci√≥n | **CU11, CU12, CU13** |
| **ESC-09** | Usabilidad | Cl√≠nico / Recepcionista | Dificultad al registrar citas/atenciones | UI Agenda/Atenci√≥n (M1) | Operaci√≥n normal | Formularios guiados + mensajes claros | ‚â•90% √©xito | **CU01, CU03, CU04** |
| **ESC-10** | Rendimiento | Usuario cl√≠nico | B√∫squeda de medicamento por nombre | M4 Inventario | Operaci√≥n normal | Filtros incrementales con √≠ndice/cach√© | <2s | **CU14** |
| **ESC-11** | Seguridad | Usuario sin permisos | Intento de modificar stock sin autorizaci√≥n | M4 Inventario + M3 Seguridad | Operaci√≥n normal | RBAC bloquea + log | 100% bloqueado | **CU13, CU14, CU15** |
| **ESC-12** | Mantenibilidad | Equipo mantenimiento | Configurar nuevas alertas de stock | M4 Inventario | Configuraci√≥n | Cambios sin afectar otros m√≥dulos | Sin fallos en integraci√≥n | **CU16** |
| **ESC-13** | Interoperabilidad | Sistema externo (Compras) | Integraci√≥n Compras ‚Üí Inventario | API REST M2 ‚Üî M4 | Operaci√≥n normal | Actualizaci√≥n autom√°tica del stock | 99% transacciones correctas | **CU09, CU10, CU14** |
| **ESC-14** | Seguridad | Usuario externo | Inicio de sesi√≥n con Google OAuth | M3 Seguridad | Producci√≥n | Validaci√≥n de token / redirecci√≥n correcta | Login ‚â§3s | **CU11, CU12** |

---

# Restricciones (RES)

Derivadas de 2.3, renumeradas y consolidadas:

| ID | Restricci√≥n | Descripci√≥n |
|----|-------------|-------------|
| **RES-01** | Stack obligatorio | Frontend en React/Next.js; Backend en Node.js/NestJS; BD PostgreSQL. |
| **RES-02** | Arquitectura por capas | Presentaci√≥n, Aplicaci√≥n, Dominio e Infraestructura en monolito modular. |
| **RES-03** | Conectividad | Toda comunicaci√≥n interna mediante REST + JSON. |
| **RES-04** | Seguridad | HTTPS obligatorio, JWT, cifrado de datos sensibles, cumplimiento Ley 29733. |
| **RES-05** | Contenedorizaci√≥n | Docker Compose para todos los entornos. |
| **RES-06** | Rendimiento | Operaciones cr√≠ticas ‚â§ 2s; ‚â• 100 usuarios concurrentes. |
| **RES-07** | Interoperabilidad | Prohibido acceso cruzado entre bases de datos de m√≥dulos. |
| **RES-08** | Disponibilidad | Backups autom√°ticos cada 24h y disponibilidad ‚â• 99%. |

---

# Preocupaciones a Nivel de Arquitectura (CRN)

Basadas en decisiones 4.6.1‚Äì4.6.5:

| ID | Nombre | Descripci√≥n | M√≥dulo / Artefacto |
|----|---------|-------------|--------------------|
| **CRN-01** | Escalabilidad en operaciones cr√≠ticas | Agenda, login y stock deben soportar carga concurrente | M1, M3, M4 |
| **CRN-02** | Consistencia entre m√≥dulos | Mantener integridad entre Servicios de Salud ‚Üî Inventario ‚Üî Compras | APIs REST internas |
| **CRN-03** | Seguridad de accesos | Garantizar control estricto de roles y permisos | M3 Seguridad |
| **CRN-04** | Trazabilidad cl√≠nica | Registros completos de atenciones, consumos e inventario | M1, M4 |
| **CRN-05** | Bajo acoplamiento entre m√≥dulos | Asegurar que los m√≥dulos internos (Salud, Compras, Seguridad, Inventario) se comuniquen mediante interfaces claras y sin dependencias directas que dificulten cambios o mantenimiento. | Architecture (NestJS Modules) |
| **CRN-06** | Evoluci√≥n del modelo de datos | JSONB debe permitir extensibilidad sin romper contratos | PostgreSQL (todos los m√≥dulos) |

---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../9.2/9.2.md)