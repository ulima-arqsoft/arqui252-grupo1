> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.2. Iteraci√≥n 1: Definir la estructura general del sistema](../9.2.md) ‚Ä∫ [9.2.4. Elementos instanciados](9.2.4.md)

## 9.2.4. Elementos instanciados, responsabilidades e interfaces

En esta iteraci√≥n se definen los bloques principales del sistema y sus responsabilidades de alto nivel:

| **Elemento** | **Tipo** | **Responsabilidades principales** | **Interfaces** |
|--------------|----------|----------------------------------|----------------|
| **Frontend Web (Next.js)** | Presentaci√≥n | Renderizar UI para usuarios internos/externos, manejo de sesiones, navegaci√≥n entre m√≥dulos, validaciones b√°sicas en cliente. | REST hacia backend (`/api/*`), manejo de JWT / cookies seguras. |
| **Backend Monolito (NestJS)** | Aplicaci√≥n / Dominio | Implementar l√≥gica de negocio de M1‚ÄìM4, coordinar flujos entre m√≥dulos (ej. validar stock antes de atenci√≥n), aplicar reglas de seguridad (RBAC), orquestar transacciones con la BD. | REST p√∫blico (`/auth`, `/agenda`, `/compras`, `/inventario`), servicios internos entre m√≥dulos (NestJS providers). |
| **M√≥dulo M1 ‚Äì Servicios de Salud** | M√≥dulo de dominio | Gesti√≥n de citas, atenciones, procedimientos, hospitalizaci√≥n. Validaci√≥n de stock con M4, registro de consumos cl√≠nicos, actualizaci√≥n del historial cl√≠nico (CU01‚ÄìCU06). | Endpoints `/agenda`, `/atenciones`; servicios internos para integraci√≥n con M4 y M3. |
| **M√≥dulo M2 ‚Äì Compras** | M√≥dulo de dominio | Proveedores, Solicitudes de Compra, √ìrdenes de Compra, Recepciones, conciliaci√≥n *3-way match* (CU07‚ÄìCU10). Actualiza inventario mediante movimientos en M4. | Endpoints `/proveedores`, `/compras`; colas as√≠ncronas para notificaciones/CSV. |
| **M√≥dulo M3 ‚Äì Gesti√≥n de Usuarios y Seguridad** | M√≥dulo transversal | Autenticaci√≥n (login, recuperaci√≥n), gesti√≥n de roles y permisos, auditor√≠a de accesos (CU11‚ÄìCU13, ESC-01‚ÄìESC-04, ESC-08, ESC-14). | Endpoints `/auth`, `/usuarios`, `/roles`; integraci√≥n con Redis (sesiones), logs de auditor√≠a. |
| **M√≥dulo M4 ‚Äì Inventario M√©dico** | M√≥dulo de dominio | Cat√°logo de insumos, stock, alertas, consumos por paciente/√°rea, auditor√≠a de movimientos (CU14‚ÄìCU16, ESC-10‚ÄìESC-16). | Endpoints `/inventario`, `/stock`, `/alertas`; servicios internos para M1 y M2. |
| **PostgreSQL (BD √∫nica)** | Infraestructura | Almacenar informaci√≥n persistente de todos los dominios: usuarios, citas, atenciones, compras, inventario, auditor√≠as. | Conexi√≥n desde backend (ORM/Query builder). Esquemas/tablas por dominio. |
| **Redis (cach√©)** | Infraestructura | Cachear resultados de login, agenda e inventario frecuente; manejar llaves de control (ej. rate-limiting). | Usado desde backend (NestJS). |
| **Broker de Mensajes (RabbitMQ / similar)** | Infraestructura opcional | Manejo de colas de notificaciones, procesos batch, logging as√≠ncrono. | Publicaci√≥n/suscripci√≥n desde backend (NestJS). |


[‚¨ÖÔ∏è Anterior](../9.2.3/9.2.3.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.2.5/9.2.5.md)