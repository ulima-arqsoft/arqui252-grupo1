> [5. T√°cticas](../../5.md) ‚Ä∫ [5.6. Listado Consolidado](../5.6.md) ‚Ä∫ [5.6.4. T√°cticas de Rendimiento](5.6.4.md)

# 5.6.4. T√°cticas de Rendimiento

## M√≥dulo Servicios de Salud

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|--------------------|-------------------------|---------------|--------------------------|----------------|---------------|--------------------------|--------------------------|
| **ESC-02** | Rendimiento | Solicitud simult√°nea de m√∫ltiples m√©dicos y pacientes al consultar la agenda | Usuarios concurrentes | Consulta de Agenda M√©dica (RF3) | Pico de uso | Optimizaci√≥n de consultas con cach√© y balanceo de carga | Tiempo de respuesta < 2 s en el 95 % de los casos |

### **T√°ctica Elegida**
**T√≠tulo:**  
Elecci√≥n entre *Cach√© de Datos en Memoria* vs *Replicaci√≥n de Servidor de Base de Datos*

**Contexto:**  
Durante los horarios pico (inicio de jornada o cierre de turno), muchos usuarios acceden simult√°neamente a la agenda m√©dica.  
El sistema debe responder r√°pidamente para evitar colas o latencia.

**Alternativas:**
1. **Cach√© de Datos en Memoria (Redis):**  
   - Almacena temporalmente la informaci√≥n m√°s consultada (agenda del d√≠a, disponibilidad, m√©dicos).  
   - Reduce las consultas directas a la base de datos.  
2. **Replicaci√≥n de Servidor de BD:**  
   - Requiere servidores adicionales que act√∫an como r√©plicas de lectura.  
   - Aumenta la complejidad de sincronizaci√≥n.

**Criterios de elecci√≥n:**  
- Minimizar tiempo de respuesta.  
- Bajo costo de mantenimiento.  
- Facilidad de integraci√≥n con el m√≥dulo actual.  

**Decisi√≥n:**  
Adoptar **Cach√© en Memoria (Redis)** para consultas recurrentes de agenda.

**Sustento:**  
Redis ofrece respuestas en milisegundos y es m√°s econ√≥mico que replicar bases completas.  
Se mantiene la consistencia gracias a actualizaciones autom√°ticas cada vez que una cita es creada o modificada.

## M√≥dulo Compras
| Cod Escenario | Atributo de Calidad | Est√≠mulo                                                           | Fuente del Est√≠mulo        | Artefacto                       | Entorno                                   | Respuesta                                                                 | Medida de Respuesta |
|---|---|---|---|---|---|---|---|
| **ESC-02** | Rendimiento | M√∫ltiples usuarios acceden simult√°neamente a listados y b√∫squedas de OC/SC | Usuarios internos/externos | Listados y buscadores de OC/SC | Carga alta (‚â• 100 usuarios concurrentes) | Paginaci√≥n en servidor, √≠ndices por campos clave, filtros incrementales y cach√© de lecturas frecuentes | **p95 < 2 s** en listados/b√∫squedas; **CPU BD < 70%** |

### T√°ctica Elegida
**Optimizaci√≥n de consultas + paginaci√≥n en servidor + cach√© selectiva.**  
Se agregan √≠ndices en `fecha`, `proveedor` y `estado`, se usa **keyset/limit-offset** seg√∫n el caso, **ETag** para respuestas y **cach√©** de consultas frecuentes con invalidaci√≥n al crear/actualizar.

### Documentaci√≥n de la Decisi√≥n (ADR)
- **T√≠tulo:** Optimizar listados de Compras con **paginaci√≥n servidor + √≠ndices + cach√©**.
- **Contexto:** Los usuarios de compras y direcci√≥n consultan OC/SC intensamente en horas pico; sin optimizaci√≥n, los tiempos de respuesta superan el umbral aceptable.
- **Alternativas:**
  - *Solo paginaci√≥n en cliente* (no reduce carga en BD).
  - *Materialized view para todo* (m√°s mantenimiento).
  - **Paginaci√≥n servidor + √≠ndices + cach√©** (equilibrio simple/efectivo).
- **Criterios de Elecci√≥n:** Impacto en p95, facilidad de implementaci√≥n, bajo costo operativo, bajo riesgo.
- **Decisi√≥n:** Implementar **paginaci√≥n servidor**, **√≠ndices** y **cach√©** con invalidaci√≥n.
- **Sustento:** Es la v√≠a m√°s simple para bajar latencia sostenidamente sin complejidad extra (no requiere cambios de arquitectura).

## M√≥dulo Gesti√≥n de Usuarios y Seguridad

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo**                                   | **Fuente del Est√≠mulo** | **Artefacto**               | **Entorno** | **Respuesta**                                                | **Medida de Respuesta**                                 |
| ----------------- | ----------------------- | ---------------------------------------------- | ----------------------- | --------------------------- | ----------- | ------------------------------------------------------------ | ------------------------------------------------------- |
| **ESC-03**        | Rendimiento             | Muchos usuarios inician sesi√≥n simult√°neamente | Usuarios concurrentes   | Autenticaci√≥n Segura (RF10) | Carga alta  | Escalado horizontal autom√°tico del servicio de autenticaci√≥n | Tiempo de respuesta < 2 s en el 95 % de las solicitudes |


### T√°ctica Elegida

**Mantener r√©plicas de computaci√≥n (Balanceo de carga)**  
Esta t√°ctica permite distribuir las solicitudes entrantes entre m√∫ltiples instancias del servicio de autenticaci√≥n. Cada r√©plica procesa una parte de las solicitudes, lo que evita la saturaci√≥n del servidor principal y mantiene tiempos de respuesta estables durante picos de carga.


**T√≠tulo:**  
Elecci√≥n entre ‚ÄúMantener r√©plicas de computaci√≥n‚Äù vs ‚ÄúIntroducir concurrencia‚Äù para mejorar el rendimiento del servicio de autenticaci√≥n.

**Contexto:**  
Durante los periodos de alta concurrencia, especialmente en horarios de inicio de jornada o cambios de turno, el m√≥dulo de autenticaci√≥n recibe m√∫ltiples solicitudes simult√°neas. Esto puede generar latencia en la validaci√≥n de credenciales y tokens, afectando la experiencia del usuario.  
El sistema se implementa en un entorno de contenedores con soporte para escalado autom√°tico, lo que permite considerar t√°cticas relacionadas con la distribuci√≥n de carga.

**Alternativas:**

- **Mantener r√©plicas de computaci√≥n (Balanceo de carga):**  
  - Permite distribuir las solicitudes entre varias instancias del servicio.  
  - Reduce la contenci√≥n de recursos y mejora el tiempo de respuesta promedio.  
  - Facilita el escalado horizontal autom√°tico seg√∫n la demanda.  

- **Introducir concurrencia (procesamiento paralelo/as√≠ncrono):**  
  - Permite que una sola instancia del servicio atienda m√∫ltiples solicitudes en paralelo.  
  - Mejora la utilizaci√≥n de CPU y reduce tiempos de espera cuando existen operaciones bloqueantes.  

**Criterios de Elecci√≥n:**
- Cantidad de usuarios concurrentes esperados.  
- Escalabilidad ante picos de demanda.  
- Mantenimiento simple sin modificar el c√≥digo base.  
- Costo de operaci√≥n y recursos disponibles.  
- Continuidad del servicio ante carga alta.

**Decisi√≥n:**  
Se elige la t√°ctica **Mantener r√©plicas de computaci√≥n (Balanceo de carga)**.

**Sustento:**  
El servicio de autenticaci√≥n requiere atender un n√∫mero alto de solicitudes simult√°neas en cortos periodos de tiempo. La t√°ctica de mantener r√©plicas permite distribuir eficientemente la carga sin necesidad de modificar el c√≥digo interno del servicio.  
Con el soporte de escalado horizontal autom√°tico, el sistema puede aumentar o reducir la cantidad de instancias activas seg√∫n la demanda, garantizando tiempos de respuesta menores a 2 segundos para el 95 % de las solicitudes.  

## M√≥dulo Inventario medico


| Cod Escenario | Atributo de Calidad | Est√≠mulo | Fuente del Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta |
| ------------- | ----------------- | -------- | ----------------- | ---------- | ------- | --------- | ----------------- |
| ESC-15 | Rendimiento | Varios usuarios consultan el inventario simult√°neamente | M√©dico / Enfermero | Consulta de stock (RF-04) | Operaci√≥n normal | El sistema procesa la b√∫squeda en < 3 segundos | Tiempo de respuesta < 3 s |

### T√°ctica Elegida
**Mantener r√©plicas de computaci√≥n (Balanceo de carga)**

**T√≠tulo:** Mantener r√©plicas de computaci√≥n vs Concurrencia para mejorar rendimiento en consultas de inventario

**Contexto:**  
Durante los picos de uso, varias consultas simult√°neas pueden generar retrasos en la respuesta de stock.

**Alternativas:**  
- Balanceo de carga entre r√©plicas  
- Introducir concurrencia en una sola instancia

**Criterios de Elecci√≥n:**  
- Escalabilidad ante picos  
- Tiempo de respuesta  
- Facilidad de mantenimiento

**Decisi√≥n:**  
Se adopta Balanceo de carga.

**Sustento:**  
Distribuye eficientemente la carga, manteniendo tiempo de respuesta √≥ptimo.

---

[‚¨ÖÔ∏è Anterior](../5.6.3/5.6.3.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../5.6.5/5.6.5.md)