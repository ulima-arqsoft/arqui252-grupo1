> [4. Decisiones Iniciales de Arquitectura](../4.md) ‚Ä∫ [4.1. M√≥dulo 1 / Integrante 1](4.1.md)

# 4.1. M√≥dulo 1 / Integrante 1

## **Decisi√≥n 1:** Asignaci√≥n de Responsabilidades

| Campo | Descripci√≥n |
|---|---|
| **T√≠tulo** | Modelo funcional del M√≥dulo 1: **Citas, Atenciones y Procedimientos** |
| **Contexto** | El m√≥dulo orquesta el ciclo cl√≠nico: **agendar** (disponibilidad por m√©dico), **atender** (diagn√≥stico/receta), **registrar procedimientos** (consumo de insumos) y **hospitalizaci√≥n**. Requiere trazabilidad, validaciones de disponibilidad y consistencia con Inventario y Pacientes. |
| **Alternativas** | - **Responsabilidades concentradas** en un solo servicio (citas + atenci√≥n + procedimientos).<br>- **Responsabilidades separadas** por subdominios: *Agenda*, *Atenci√≥n*, *Procedimientos/Hospitalizaci√≥n*. |
| **Criterios de elecci√≥n** | Claridad de l√≠mites funcionales, menor acoplamiento, facilidad de pruebas y evoluci√≥n, control transaccional simple para cada caso de uso. |
| **Decisi√≥n** | **Separar** en tres subm√≥dulos internos: **Agenda** (citas), **Atenci√≥n** (consulta/diagn√≥stico/receta) y **Procedimientos** (incluye hospitalizaci√≥n). |
| **Sustento** | Reduce acoplamiento, permite trabajo paralelo y alinea los atributos de calidad (rendimiento en Agenda, auditabilidad en Atenci√≥n y interoperabilidad en Procedimientos). |

---

## **Decisi√≥n 2:** Modelo de Coordinaci√≥n

| Campo | Descripci√≥n |
|---|---|
| **T√≠tulo** | **H√≠brido s√≠ncrono/as√≠ncrono con patr√≥n Outbox** |
| **Contexto** | Las operaciones cr√≠ticas (reservar cita, registrar atenci√≥n, validar stock) deben responder en tiempo real. Otras, como notificaciones o logs, pueden procesarse luego. |
| **Alternativas** | - **S√≠ncrono total:** Todos los servicios esperan respuesta inmediata.<br>- **As√≠ncrono total:** Los servicios no esperan respuesta.<br>- **H√≠brido:** S√≠ncrono para operaciones cr√≠ticas y as√≠ncrono para tareas secundarias. |
| **Criterios de elecci√≥n** | Rapidez en la experiencia de usuario, resiliencia ante fallos parciales, trazabilidad y simplicidad de mantenimiento. |
| **Decisi√≥n** | **H√≠brido:** REST s√≠ncrono para rutas cr√≠ticas y colas/eventos as√≠ncronos (RabbitMQ o Kafka) para tareas no cr√≠ticas. |
| **Sustento** | Mantiene baja latencia en las operaciones principales y permite escalar tareas secundarias sin afectar la experiencia del usuario. |

---

## **Decisi√≥n 3:** Modelo de Datos

| Campo | Descripci√≥n |
|---|---|
| **T√≠tulo** | **Modelo Relacional con Campos Flexibles (PostgreSQL + JSONB)** |
| **Contexto** | Se requiere coherencia y seguridad de los datos en citas, atenciones y procedimientos, pero tambi√©n flexibilidad para almacenar observaciones cl√≠nicas variables por especialidad. |
| **Alternativas** | - **Relacional puro (PostgreSQL):** Estructura r√≠gida.<br>- **Documental (MongoDB):** Flexible pero menos consistente.<br>- **Mixto:** Combina ambos enfoques. |
| **Criterios de elecci√≥n** | Integridad referencial, consultas eficientes, soporte para datos estructurados y semi-estructurados. |
| **Decisi√≥n** | Utilizar **PostgreSQL** como base principal con campos **JSONB** para notas cl√≠nicas y observaciones. |
| **Sustento** | PostgreSQL asegura consistencia transaccional y permite flexibilidad en los campos cl√≠nicos sin modificar la estructura principal. |

---

## **Decisi√≥n 4:** Mapeo entre Elementos de Arquitectura

| Campo | Descripci√≥n |
|---|---|
| **T√≠tulo** | **Arquitectura por Capas (Modular Monolith)** |
| **Contexto** | El proyecto tiene un equipo reducido y plazos cortos, con necesidad de seguridad, trazabilidad y mantenibilidad. |
| **Alternativas** | - **Arquitectura por Capas:** Presentaci√≥n, Aplicaci√≥n, Dominio e Infraestructura.<br>- **Microservicios:** Independencia total de m√≥dulos con mayor complejidad operativa. |
| **Criterios de elecci√≥n** | Facilidad de desarrollo, mantenimiento, y posibilidad de escalar o migrar a microservicios en el futuro. |
| **Decisi√≥n** | Adoptar una **arquitectura por capas modular**, con l√≠mites claros entre presentaci√≥n, aplicaci√≥n, dominio e infraestructura. |
| **Sustento** | Reduce complejidad inicial, permite separar responsabilidades y facilita futuras migraciones sin reescribir el sistema. |

---

## **Decisi√≥n 5:** Elecci√≥n de Tecnolog√≠a

| Campo | Descripci√≥n |
|---|---|
| **T√≠tulo** | **Stack Tecnol√≥gico del M√≥dulo 1** |
| **Contexto** | Se requiere un entorno moderno, seguro y f√°cil de mantener, con buen soporte para autenticaci√≥n e integraci√≥n con otros m√≥dulos. |
| **Alternativas** | - **TypeScript (NestJS):** Modular y r√°pido de implementar.<br>- **Java/Kotlin (Spring):** Robusto pero m√°s complejo.<br>- **Python (FastAPI):** √Ågil pero menor rendimiento en alta concurrencia. |
| **Criterios de elecci√≥n** | Productividad, integraci√≥n sencilla con frontend y m√≥dulos, y experiencia previa del equipo. |
| **Decisi√≥n** | Adoptar **TypeScript + NestJS** con **PostgreSQL** como base de datos, **Redis** para cach√© y **RabbitMQ** para mensajer√≠a as√≠ncrona. |
| **Sustento** | NestJS ofrece modularidad y compatibilidad con JWT y colas; PostgreSQL garantiza consistencia y Redis mejora rendimiento. |

---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../4.2/4.2.md)